<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Security Admin Console</title>
    <link rel="stylesheet" href="security.css" />
</head>

<body class="theme-light">
    <!-- TOP NAVIGATION BAR -->
    <header class="top-nav">
        <div class="nav-left">
            <img src="assets/VisionBank-Logo.png" class="nav-logo" alt="Logo">
            <span class="nav-title">Security Admin Console</span>
        </div>

        <div class="nav-right">
            <button id="themeToggle" class="theme-btn">
                <span id="themeToggleIcon">ðŸŒ™</span>
                <span id="themeToggleText">Dark mode</span>
            </button>

            <button id="logout-btn" class="logout-btn">Logout</button>
        </div>
    </header>

    <!-- MAIN WRAPPER -->
    <div class="main-container">

        <!-- LOGIN VIEW -->
        <section id="login-view" class="view active-view">
            <div class="card login-card">
                <h2>Administrator Login</h2>

                <form id="login-form">
                    <label>Username</label>
                    <input id="login-username" type="text" autocomplete="off">

                    <label>Password / PIN</label>
                    <input id="login-pin" type="password">

                    <div id="login-totp-wrapper" class="hidden">
                        <label>Microsoft Authenticator Code</label>
                        <input id="login-totp" type="text" maxlength="6">
                    </div>

                    <button class="primary-btn" type="submit">Login</button>
                </form>

                <p id="login-message" class="error-text"></p>
            </div>
        </section>

        <!-- MFA SETUP -->
        <section id="mfa-setup-view" class="view hidden">
            <div class="card mfa-card">
                <h2>MFA Enrollment</h2>
                <p>Scan the QR with Microsoft Authenticator.</p>

                <img id="mfa-qr-img" class="mfa-qr">

                <label>Account</label>
                <input id="mfa-account" readonly>

                <label>Secret</label>
                <input id="mfa-secret" readonly>

                <label>Enter 6-digit code</label>
                <input id="mfa-code">

                <button id="mfa-confirm-btn" class="primary-btn">Confirm</button>
                <button id="mfa-cancel-btn" class="secondary-btn">Cancel</button>

                <p id="mfa-message" class="error-text"></p>
            </div>
        </section>

        <!-- ADMIN VIEW -->
        <section id="admin-view" class="view hidden">

            <!-- TAB BAR -->
            <div class="tab-bar">
                <button class="tab-btn active-tab" data-tab="tab-hours">Business Hours</button>
                <button class="tab-btn" data-tab="tab-ip">IP Allowlist</button>
                <button class="tab-btn" data-tab="tab-users">User Management</button>
                <button class="tab-btn" data-tab="tab-logs">Audit Logs</button>
            </div>

            <!-- TAB CONTENT AREA -->
            <div class="tab-content">

                <!-- BUSINESS HOURS TAB -->
                <div id="tab-hours" class="tab-section active-section">
                    <div class="card">
                        <h2>Business Hours Policy</h2>

                        <form id="hours-form">

                            <div class="grid-2">
                                <div>
                                    <label>Start Time</label>
                                    <input id="hours-start" type="time">
                                </div>

                                <div>
                                    <label>End Time</label>
                                    <input id="hours-end" type="time">
                                </div>
                            </div>

                            <label>Active Days:</label>
                            <div class="days-grid">
                                <label><input type="checkbox" value="0" class="hours-day"> Sun</label>
                                <label><input type="checkbox" value="1" class="hours-day"> Mon</label>
                                <label><input type="checkbox" value="2" class="hours-day"> Tue</label>
                                <label><input type="checkbox" value="3" class="hours-day"> Wed</label>
                                <label><input type="checkbox" value="4" class="hours-day"> Thu</label>
                                <label><input type="checkbox" value="5" class="hours-day"> Fri</label>
                                <label><input type="checkbox" value="6" class="hours-day"> Sat</label>
                            </div>

                            <button type="submit" class="primary-btn">Save Hours</button>
                        </form>

                        <div id="admin-status" class="status-banner"></div>
                    </div>
                </div>

                <!-- IP RULES TAB -->
                <div id="tab-ip" class="tab-section">
                    <div class="card">
                        <h2>Allowed IP Addresses</h2>

                        <div class="ip-add-row">
                            <input id="ip-add-input" placeholder="Enter IPv4 / IPv6 / CIDR">
                            <button id="ip-add-btn" class="primary-btn">Add</button>
                        </div>

                        <div id="ip-list" class="ip-list"></div>

                        <textarea id="ip-rules-textarea" class="ip-textarea test-box"></textarea>

                        <button id="ip-save-btn" class="secondary-btn">Save Rules</button>
                    </div>
                </div>

                <!-- USERS TAB -->
                <div id="tab-users" class="tab-section">
                    <div class="card">
                        <h2>User Management</h2>
                        <div id="user-management-anchor"></div>
                    </div>
                </div>

                <!-- LOGS TAB -->
                <div id="tab-logs" class="tab-section">
                    <div class="card">
                        <h2>Audit Log</h2>
                        <pre id="audit-log" class="log-box"></pre>
                    </div>
                </div>

            </div> <!-- END TAB CONTENT -->
        </section>
    </div>

    <script src="security.js"></script>
    <script>
        /* TAB SWITCHING */
        document.querySelectorAll(".tab-btn").forEach(btn => {
            btn.addEventListener("click", () => {
                document.querySelectorAll(".tab-btn").forEach(x => x.classList.remove("active-tab"));
                document.querySelectorAll(".tab-section").forEach(x => x.classList.remove("active-section"));

                btn.classList.add("active-tab");
                const tab = btn.dataset.tab;
                document.getElementById(tab).classList.add("active-section");
            });
        });
    </script>
</body>
</html>
