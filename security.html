<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Security Admin Console</title>
    <link rel="stylesheet" href="security.css" />
</head>

<body class="theme-light">

<!-- ============================================================
     SIDEBAR NAVIGATION
============================================================ -->
<aside id="sidebar">
    <div class="nav-header">
        <h2>Security Console</h2>
    </div>

    <nav class="nav-menu">
        <button class="nav-item active" data-target="login-view">üîê Login</button>
        <button class="nav-item" data-target="admin-view">üõ°Ô∏è Admin</button>
        <button class="nav-item" data-target="audit-section-scroll">üìú Audit Logs</button>
        <button class="nav-item" data-target="ip-section-scroll">üåê Allowlist</button>
        <button class="nav-item" data-target="hours-section-scroll">‚è± Business Hours</button>
    </nav>

    <div class="sidebar-footer">
        <button id="themeToggle" class="theme-toggle">
            <span id="themeToggleIcon">üåô</span>
            <span id="themeToggleText">Dark mode</span>
        </button>
    </div>
</aside>

<!-- ============================================================
     MAIN CONTENT AREA
============================================================ -->
<main id="main">

<!-- LOGIN VIEW -->
<div id="login-view" class="panel active">
    <h2 class="panel-title">Administrator Login</h2>

    <form id="login-form" class="form">
        <label>Username
            <input type="text" id="login-username" required />
        </label>

        <label>Password / PIN
            <input type="password" id="login-pin" required />
        </label>

        <div id="login-totp-wrapper" class="hidden">
            <label>Microsoft Authenticator Code
                <input type="text" id="login-totp" maxlength="6" />
            </label>
        </div>

        <button type="submit" class="btn-primary">Login</button>
        <div id="login-message" class="form-message"></div>
    </form>

    <button id="override-toggle" class="link-btn small">Use Override Key</button>

    <form id="override-form" class="form hidden">
        <label>Override Key
            <input type="password" id="override-input" />
        </label>
        <button type="submit" class="btn-secondary">Submit</button>
    </form>
</div>

<!-- MFA SETUP VIEW -->
<div id="mfa-setup-view" class="panel hidden">
    <h2 class="panel-title">MFA Enrollment</h2>

    <div class="mfa-box">
        <img id="mfa-qr-img" class="mfa-qr" />
        <div class="mfa-info">
            <label>Account
                <input id="mfa-account" readonly />
            </label>

            <label>Secret
                <input id="mfa-secret" readonly />
            </label>

            <label>6-Digit Code
                <input id="mfa-code" maxlength="6" />
            </label>

            <button id="mfa-confirm-btn" class="btn-primary">Confirm MFA</button>
            <button id="mfa-cancel-btn" class="btn-secondary">Cancel</button>
            <div id="mfa-message" class="form-message"></div>
        </div>
    </div>
</div>

<!-- ADMIN VIEW -->
<div id="admin-view" class="panel hidden">
    <div class="admin-header">
        <h2 class="panel-title">Admin Dashboard</h2>
        <button id="logout-btn" class="btn-secondary small">Logout</button>
    </div>

    <div id="admin-status"></div>

    <!-- BUSINESS HOURS -->
    <section id="hours-section-scroll" class="card">
        <h3>Business Hours</h3>

        <form id="hours-form" class="form-inline">
            <label>Start
                <input type="time" id="hours-start" />
            </label>

            <label>End
                <input type="time" id="hours-end" />
            </label>

            <div class="day-grid">
                <label><input type="checkbox" value="1" class="hours-day" /> Mon</label>
                <label><input type="checkbox" value="2" class="hours-day" /> Tue</label>
                <label><input type="checkbox" value="3" class="hours-day" /> Wed</label>
                <label><input type="checkbox" value="4" class="hours-day" /> Thu</label>
                <label><input type="checkbox" value="5" class="hours-day" /> Fri</label>
                <label><input type="checkbox" value="6" class="hours-day" /> Sat</label>
                <label><input type="checkbox" value="0" class="hours-day" /> Sun</label>
            </div>

            <button type="submit" class="btn-primary">Save Hours</button>
        </form>
    </section>

    <!-- IP ALLOWLIST -->
    <section id="ip-section-scroll" class="card">
        <h3>IP Allowlist</h3>

        <div class="ip-add-row">
            <input id="ip-add-input" placeholder="IPv4 / IPv6 / CIDR" />
            <button id="ip-add-btn" class="btn-primary">Add</button>
        </div>

        <div id="ip-list" class="ip-list"></div>

        <button id="ip-save-btn" class="btn-secondary small">Save Rules</button>
    </section>

    <!-- AUDIT LOG -->
    <section id="audit-section-scroll" class="card">
        <h3>Security Audit Logs</h3>
        <pre id="audit-log" class="log-box"></pre>
    </section>
</div>

</main>

<script src="security.js"></script>
<script>
document.querySelectorAll(".nav-item").forEach(btn => {
    btn.addEventListener("click", () => {
        document.querySelectorAll(".nav-item").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");

        const target = btn.dataset.target;
        const el = document.getElementById(target);

        if (el) {
            el.scrollIntoView({ behavior: "smooth" });
        }
    });
});
</script>

</body>
</html>
